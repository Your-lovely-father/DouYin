(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c10e08c"],{"0ebd":function(t,e,i){},1949:function(t,e,i){"use strict";var s=i("273b"),o=i.n(s);o.a},"273b":function(t,e,i){},"4b24":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{on:{"!click":function(e){t.closeCommentList(e)}}},[i("scroll",{ref:"listWrap",staticClass:"list-wrap",attrs:{data:t.list,pullup:!0},on:{scrollToEnd:t.fetchVideoList}},[i("followed-list",{attrs:{list:t.list},on:{showCommentList:t.fetchCommentsAndShowList}})],1),i("transition",{attrs:{name:"up"}},[t.showCommentList?i("comment-list",{attrs:{commentList:t.commentList,commentNum:t.commentNum,currentCommentVideoId:t.currentCommentVideoId},on:{close:t.closeCommentList,scrollToEnd:t.fetchCommentsAndShowList}}):t._e()],1)],1)},o=[],n=(i("6762"),i("2fdb"),i("be94")),a=i("e9fc"),c=i("ed17"),d=i("2ce0"),l=i("2f62"),r=i("8b55"),m={created:function(){this.fetchVideoList()},activated:function(){!1===this.isFirst&&0!==this.followedNewsNum&&(this.videoPage=0,this.videoIsEnd=!1,this.list=[],this.fetchVideoList()),this.isFirst=!1},data:function(){return{isFirst:!0,showCommentList:!1,commentNum:0,commentList:[],videoPage:0,page:0,currentCommentVideoId:"",isEnd:!1,videoIsEnd:!1,list:[]}},computed:Object(n["a"])({},Object(l["c"])(["loginInfo","followedNewsNum"])),methods:Object(n["a"])({fetchCommentsAndShowList:function(t,e){var i=this;if(this.currentCommentVideoId!==t)this.isEnd=!1,this.page=1,this.currentCommentVideoId=t,this.commentNum=e,this.$axios.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page)).then(function(t){t.data.data.length<21&&(i.isEnd=!0),i.commentList=Object(r["b"])(t.data.data),i.showCommentList=!0});else{if(this.page++,this.isEnd)return;this.$axios.get("/api/video/".concat(t,"/getVideoComment/page/").concat(this.page)).then(function(t){t.data.data.length<21&&(i.isEnd=!0),i.commentList=Object(r["b"])(i.commentList.concat(t.data.data)),i.showCommentList=!0})}},fetchVideoList:function(){var t=this;if(!this.videoIsEnd){var e=this.loginInfo.userId;this.videoPage++,this.$axios.get("/api/user/".concat(e,"/FollowerVideo/page/").concat(this.videoPage)).then(function(e){e.data.data.length<21&&(t.videoIsEnd=!0),t.list=t.list.concat(e.data.data)})}},closeCommentList:function(t){this.showCommentList&&("VIDEO"===t.target.nodeName||t.target.className.includes("icon-close")||t.target.className.includes("followed-item"))&&(this.currentCommentVideoId="",t.stopPropagation(),this.showCommentList=!1)}},Object(l["d"])(["SET_FOLLOWEDNEWSNUM"])),beforeRouteLeave:function(t,e,i){var s=this;this.followedNewsNum>0?this.$axios.get("/api/user/".concat(this.loginInfo.userId,"/watchAllFollowedNewVideo")).then(function(t){200===t.data.code&&(s.SET_FOLLOWEDNEWSNUM(0),i())}):i()},components:{Scroll:a["a"],FollowedList:c["a"],CommentList:d["a"]}},u=m,h=(i("addc"),i("2877")),f=Object(h["a"])(u,s,o,!1,null,"0c92422c",null);f.options.__file="Followed.vue";e["default"]=f.exports},addc:function(t,e,i){"use strict";var s=i("0ebd"),o=i.n(s);o.a},ed17:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"followed-list"},[t._l(t.list,function(e,s){return i("div",{key:e.Video.videoId,staticClass:"followed-item"},[i("div",{staticClass:"top"},[i("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+e.Video.userAvatar,alt:"",width:"30",height:"30"},on:{click:function(i){t.chooseUser(e.Video.userId)}}}),i("span",{staticClass:"name"},[t._v("@"+t._s(e.Video.userNickname))])]),i("div",{staticClass:"desc"},[t._v(t._s(e.Video.videoDesc))]),i("div",{staticClass:"video-wrap"},[i("video",{staticClass:"video",attrs:{poster:e.Video.videoCover,src:e.Video.videoPath,"webkit-playsinline":"",playsinline:"","x5-video-player-type":"h5"},on:{click:function(e){return e.target!==e.currentTarget?null:t.playHandler(e)}}})]),i("div",{staticClass:"button-bar"},[i("div",{staticClass:"like iconfont icon-heart-fill",class:{"red-heart":t.likes[s]},on:{click:function(i){t.toggleLike(e,s)}}},[i("span",{staticClass:"likenum"},[t._v(t._s(e.WSLCNum.likeNum))])]),i("div",{staticClass:"comment iconfont icon-message",on:{click:function(i){i.stopPropagation(),t.showCommentList(e.Video.videoId,e.WSLCNum.commentNum)}}},[i("span",{staticClass:"commentnum"},[t._v(t._s(e.WSLCNum.commentNum))])]),i("div",{staticClass:"share iconfont icon-share"},[i("span",{staticClass:"sharenum"},[t._v(t._s(e.WSLCNum.shareNum))])])]),i("div",{staticClass:"time"},[t._v(t._s(t.formatTime(e.Video.createdAt)))])])}),i("no-more",{staticClass:"no-more"})],2)},o=[],n=(i("6762"),i("2fdb"),i("be94")),a=i("d94a"),c=i("41ea"),d=i("8b55"),l=i("2f62"),r={props:{list:{type:Array,required:!0}},created:function(){for(var t=this,e=function(e,i){t.$axios.get("/api/user/".concat(t.loginInfo.userId,"/isLiked/").concat(t.list[e].Video.videoId)).then(function(s){t.likes[e]=s.data.data,e===i-1&&t.$forceUpdate()})},i=0,s=this.list.length;i<s;i++)e(i,s)},watch:{list:function(t,e){for(var i=this,s=function(t,e){i.$axios.get("/api/user/".concat(i.loginInfo.userId,"/isLiked/").concat(i.list[t].Video.videoId)).then(function(s){i.likes[t]=s.data.data,t===e-1&&i.$forceUpdate()})},o=e.length,n=t.length;o<n;o++)s(o,n)}},data:function(){return{likes:[],baseURL:c["a"]}},computed:Object(n["a"])({},Object(l["c"])(["loginInfo"])),methods:{showCommentList:function(t,e){this.$emit("showCommentList",t,e)},playHandler:function(t){var e=t.target;e.paused?e.play():e.pause()},toggleLike:function(t,e){var i=this;this.$axios.get("/api/user/".concat(this.loginInfo.userId,"/triggerLike/").concat(t.Video.videoId)).then(function(s){s.data.data.includes("取消")?(i.likes[e]=!1,t.WSLCNum.likeNum--):(i.likes[e]=!0,t.WSLCNum.likeNum++),i.likes=[].concat(i.likes),i.$socket.emit("sendTriggerLike",{fromUserId:i.loginInfo.userId,toUserId:t.Video.userId})})},chooseUser:function(t){"/followed"===this.$route.path&&this.$router.push("/profile/".concat(t))},formatTime:d["d"]},components:{NoMore:a["a"]}},m=r,u=(i("1949"),i("2877")),h=Object(u["a"])(m,s,o,!1,null,"4b12de74",null);h.options.__file="FollowedList.vue";e["a"]=h.exports}}]);