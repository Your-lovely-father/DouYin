(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c7819f3"],{"0e42":function(t,s,i){},"1cb8":function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},e=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"spinner7"},[i("div",{staticClass:"spinner-container container1"},[i("div",{staticClass:"circle1"}),i("div",{staticClass:"circle2"}),i("div",{staticClass:"circle3"}),i("div",{staticClass:"circle4"})]),i("div",{staticClass:"spinner-container container2"},[i("div",{staticClass:"circle1"}),i("div",{staticClass:"circle2"}),i("div",{staticClass:"circle3"}),i("div",{staticClass:"circle4"})]),i("div",{staticClass:"spinner-container container3"},[i("div",{staticClass:"circle1"}),i("div",{staticClass:"circle2"}),i("div",{staticClass:"circle3"}),i("div",{staticClass:"circle4"})])])}],n={},c=n,o=(i("6aab"),i("2877")),l=Object(o["a"])(c,a,e,!1,null,"578604de",null);l.options.__file="loading.vue";s["a"]=l.exports},"288d":function(t,s,i){},"6aab":function(t,s,i){"use strict";var a=i("0e42"),e=i.n(a);e.a},"89d4":function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"myList"},[i("div",{staticClass:"topBar"},[i("span",{staticClass:"backbtn iconfont icon-left",on:{click:t.GoBack}}),i("p",{staticClass:"title"},[t._v(t._s(t.Title))])]),i("scroll",{staticClass:"scroll-wrap",class:{"scroll-wrap-bottom":t.needBottomMargin},attrs:{pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[i("ul",[t._t("default")],2)])],1)},e=[],n=i("e9fc"),c={props:{Title:{type:String,default:""},needBottomMargin:{type:Boolean,default:!1}},methods:{GoBack:function(){this.$router.back()},scrollToEnd:function(){this.$emit("scrollToEnd")}},components:{Scroll:n["a"]}},o=c,l=(i("cfc8"),i("2877")),r=Object(l["a"])(o,a,e,!1,null,"1aedd296",null);r.options.__file="myList.vue";s["a"]=r.exports},"8aa9":function(t,s,i){"use strict";var a=i("288d"),e=i.n(a);e.a},"9be9":function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("tip",{ref:"tip"}),i("my-list",{attrs:{Title:t.title},on:{scrollToEnd:t.scrollToEnd}},[t._l(t.list,function(s){return i("li",{key:s.userId,staticClass:"list-item",on:{click:function(i){t.chooseUser(i,s.userId)}}},[i("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+s.userAvatar,width:"45",height:"45",alt:""}}),i("div",{staticClass:"main"},[i("p",{staticClass:"name"},[t._v(t._s(s.userNickname))]),i("p",{staticClass:"desc"},[t._v(t._s(s.userDesc))])]),"me"===t.$route.params.id?i("div",{staticClass:"btn",class:{"btn-inactive":s.bothStatus},domProps:{innerHTML:t._s(s.bothStatus?"互相关注":"关注")},on:{click:function(i){t.triggerFollow(s)}}}):"me"!==t.$route.params.id&&"me"!==s.myRelation?i("div",{staticClass:"btn",class:{"btn-inactive":!!["follow","both"].includes(s.myRelation)},domProps:{innerHTML:t._s(t.getBtnHtml(s.myRelation))},on:{click:function(i){t.triggerFollow(s)}}}):t._e()])}),t.isLoading?i("loading"):i("no-more",{staticClass:"no-more"})],2)],1)},e=[],n=i("be94"),c=(i("6762"),i("2fdb"),i("cadf"),i("551c"),i("097d"),i("89d4")),o=i("41ea"),l=i("d94a"),r=i("2f62"),u=i("1cb8"),d=21,f={activated:function(){this.list=[],this.page=0,this.isEnd=!1,this.fetchFansList()},data:function(){return{list:[],isLoading:!1,page:0,isEnd:!1,baseURL:o["a"],timer:null}},methods:{fetchFansList:function(){var t=this;if(!this.isEnd){var s="me"===this.$route.params.id?this.loginInfo.userId:this.$route.params.id;this.isLoading=!0,this.page++,this.$axios.get("/api/user/".concat(s,"/Fans/page/").concat(this.page,"/").concat(this.loginInfo.userId)).then(function(s){t.isLoading=!1,s.data.data.length<d&&(t.isEnd=!0),t.list=t.list.concat(s.data.data)})}},triggerFollow:function(t){var s=this;this.timer||(this.timer=setTimeout(function(){s.$axios.get("/api/user/".concat(s.loginInfo.userId,"/triggerFollow/").concat(t.userId)).then(function(i){if("me"===s.$route.params.id)i.data.data.includes("取消")?(s.$refs.tip.show("取关成功"),t.bothStatus=!1):(s.$refs.tip.show("关注成功"),t.bothStatus=!0);else if(i.data.data.includes("取消"))switch(s.$refs.tip.show("取关成功"),t.myRelation){case"follow":t.myRelation="none";break;case"both":t.myRelation="fan";break}else switch(s.$refs.tip.show("关注成功"),t.myRelation){case"fan":t.myRelation="both";break;case"none":t.myRelation="follow";break}s.$socket.emit("sendTriggerFollow",{fromUserId:s.loginInfo.userId,toUserId:t.userId}),s.timer=null}).catch(function(t){s.$refs.tip.show("网络错误"),s.timer=null})},300))},chooseUser:function(t,s){t.target.className.includes("btn")||this.$router.push("/profile/".concat(s))},scrollToEnd:function(){this.fetchFansList()},getBtnHtml:function(t){switch(t){case"fan":case"none":return"关注";case"follow":return"已关注";case"both":return"互相关注"}}},computed:Object(n["a"])({title:function(){return"me"===this.$route.params.id?"我的粉丝":"TA的粉丝"}},Object(r["c"])(["loginInfo"])),components:{MyList:c["a"],Loading:u["a"],NoMore:l["a"]}},h=f,m=(i("8aa9"),i("2877")),p=Object(m["a"])(h,a,e,!1,null,"188174fa",null);p.options.__file="FanList.vue";s["default"]=p.exports},cfc8:function(t,s,i){"use strict";var a=i("df3c"),e=i.n(a);e.a},df3c:function(t,s,i){}}]);