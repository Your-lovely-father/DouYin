(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b9e42aa"],{"002c":function(t,e,s){"use strict";var n=s("17f3"),o=s.n(n);o.a},"17f3":function(t,e,s){},6315:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("scroll",{staticClass:"search-list",attrs:{pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[s("tip",{ref:"tip"}),s("ul",t._l(t.searches,function(e){return s("li",{key:e.id,staticClass:"search-item",on:{click:function(s){t.selectItem(e)}}},[s("img",{staticClass:"avatar",attrs:{src:""+t.baseURL+e.userAvatar,width:"50",height:"50"}}),s("div",{staticClass:"main"},[s("span",{staticClass:"name"},[t._v(t._s(e.userNickname))]),s("span",{staticClass:"desc"},[t._v(t._s(e.userDesc))])]),s("div",{staticClass:"btn",class:["follow","both"].includes(e.myRelation)?"btn-inactive":"btn-active",domProps:{innerHTML:t._s(t.getBtnHtml(e.myRelation))},on:{click:function(s){s.stopPropagation(),t.triggerFollow(s.target,e)}}})])}))],1)},o=[],a=(s("6762"),s("2fdb"),s("be94")),i=s("41ea"),c=s("e9fc"),r=s("2f62"),l={props:{searches:{type:Array,default:function(){return[]}}},data:function(){return{baseURL:i["a"],timer:null}},computed:Object(a["a"])({},Object(r["c"])(["loginInfo"])),methods:{selectItem:function(t){this.$emit("select",t)},scrollToEnd:function(){0!==this.searches.length&&this.$emit("scrollToEnd")},triggerFollow:function(t,e){var s=this;this.timer||(this.timer=setTimeout(function(){s.$axios.get("/api/user/".concat(s.loginInfo.userId,"/triggerFollow/").concat(e.userId)).then(function(t){if(t.data.data.includes("取消"))switch(s.$refs.tip.show("取关成功"),e.myRelation){case"follow":e.myRelation="none";break;case"both":e.myRelation="fan";break}else switch(s.$refs.tip.show("关注成功"),e.myRelation){case"fan":e.myRelation="both";break;case"none":e.myRelation="follow";break}s.$socket.emit("sendTriggerFollow",{fromUserId:s.loginInfo.userId,toUserId:e.userId}),s.timer=null}).catch(function(t){s.$refs.tip.show("网络错误"),s.timer=null})},300))},getBtnHtml:function(t){switch(t){case"fan":case"none":return"关注";case"follow":return"已关注";case"both":return"互相关注"}}},components:{Scroll:c["a"]}},u=l,f=(s("002c"),s("2877")),h=Object(f["a"])(u,n,o,!1,null,"7776be2b",null);h.options.__file="searchUserList.vue";e["default"]=h.exports}}]);